---
title: "Deploy Function from Git"
api: "POST /functions/from-git"
description: "Deploy a serverless function directly from a Git repository"
---

Deploy a serverless function from a Git repository (GitHub, GitLab, Bitbucket). This endpoint clones the repository, validates the code for security, and deploys it as a serverless function.

<Note>
  Supports both **public** and **private** repositories with authentication tokens.
</Note>

## Security Features

<CardGroup cols={2}>
  <Card title="URL Validation" icon="shield-check">
    Only allows Git URLs from GitHub, GitLab, and Bitbucket
  </Card>
  <Card title="Code Scanning" icon="magnifying-glass">
    Scans for dangerous imports (`os`, `subprocess`, `eval`, etc.)
  </Card>
  <Card title="Size Limits" icon="weight-scale">
    Repository size limited to 100MB
  </Card>
  <Card title="Syntax Validation" icon="code">
    Validates Python syntax before deployment
  </Card>
</CardGroup>

## Request Body

<ParamField body="name" type="string" required>
  Unique name for the function (lowercase, hyphens allowed)
</ParamField>

<ParamField body="git_url" type="string" required>
  Git repository URL (HTTPS format)

  **Examples:**
  - `https://github.com/user/repo.git`
  - `https://gitlab.com/user/repo.git`
  - `https://bitbucket.org/user/repo.git`
</ParamField>

<ParamField body="git_ref" type="string" default="main">
  Git reference (branch, tag, or commit SHA)

  **Examples:** `main`, `develop`, `v1.0.0`, `abc1234`
</ParamField>

<ParamField body="git_token" type="string">
  Authentication token for private repositories (optional)

  **Formats:**
  - GitHub: `ghp_xxxxxxxxxxxx`
  - GitLab: `glpat-xxxxxxxxxxxx`
  - Bitbucket: App password
</ParamField>

<ParamField body="subdirectory" type="string">
  Subdirectory path within repository (optional)

  **Example:** `functions/stress_calculation`
</ParamField>

<ParamField body="handler" type="string" required>
  Python handler path (module:function format)

  **Example:** `main.calculate` â†’ calls `calculate()` in `main.py`
</ParamField>

<ParamField body="runtime" type="string" default="python311">
  Python runtime version

  **Options:** `python311`, `python312`
</ParamField>

<ParamField body="description" type="string">
  Function description for documentation
</ParamField>

<ParamField body="memory_limit" type="integer" default="512">
  Memory limit in MB (128 - 2048)
</ParamField>

<ParamField body="timeout" type="integer" default="300">
  Execution timeout in seconds (1 - 900)
</ParamField>

<ParamField body="environment_variables" type="object">
  Environment variables as key-value pairs

  ```json
  {
    "API_KEY": "secret_value",
    "DEBUG": "false"
  }
  ```
</ParamField>

<ParamField body="requirements_file" type="string" default="requirements.txt">
  Path to requirements file within repository
</ParamField>

## Response

<ResponseField name="message" type="string">
  Deployment confirmation message
</ResponseField>

<ResponseField name="function" type="object">
  Deployed function details

  <Expandable title="properties">
    <ResponseField name="id" type="string">
      Function UUID
    </ResponseField>
    <ResponseField name="name" type="string">
      Function name
    </ResponseField>
    <ResponseField name="status" type="string">
      Deployment status: `ready`, `deploying`, `error`
    </ResponseField>
    <ResponseField name="git_url" type="string">
      Source Git repository URL
    </ResponseField>
    <ResponseField name="git_commit_sha" type="string">
      Deployed commit SHA
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="deployment_id" type="string">
  Unique deployment identifier
</ResponseField>

<RequestExample>

```bash cURL
curl -X POST https://api.mecapy.com/functions/from-git \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "calculate-stress",
    "description": "Calculate mechanical stress",
    "git_url": "https://github.com/user/mechanics-functions.git",
    "git_ref": "main",
    "subdirectory": "functions/stress",
    "runtime": "python311",
    "handler": "main.calculate"
  }'
```

```python Python
import requests

response = requests.post(
    "https://api.mecapy.com/functions/from-git",
    headers={
        "Authorization": f"Bearer {token}",
        "Content-Type": "application/json"
    },
    json={
        "name": "calculate-stress",
        "description": "Calculate mechanical stress",
        "git_url": "https://github.com/user/mechanics-functions.git",
        "git_ref": "main",
        "subdirectory": "functions/stress",
        "runtime": "python311",
        "handler": "main.calculate"
    }
)

print(response.json())
```

```javascript JavaScript
const response = await fetch('https://api.mecapy.com/functions/from-git', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'calculate-stress',
    description: 'Calculate mechanical stress',
    git_url: 'https://github.com/user/mechanics-functions.git',
    git_ref: 'main',
    subdirectory: 'functions/stress',
    runtime: 'python311',
    handler: 'main.calculate'
  })
});

const data = await response.json();
console.log(data);
```

</RequestExample>

<ResponseExample>

```json Success Response
{
  "message": "Function 'calculate-stress' deployed from Git repository https://github.com/user/mechanics-functions.git (commit: abc1234)",
  "function": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "calculate-stress",
    "description": "Calculate mechanical stress",
    "status": "ready",
    "runtime": "python311",
    "handler": "main.calculate",
    "git_url": "https://github.com/user/mechanics-functions.git",
    "git_ref": "main",
    "git_commit_sha": "abc1234567890def",
    "created_at": "2025-01-20T10:30:00Z",
    "owner_id": "user-123"
  },
  "deployment_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

</ResponseExample>

## Error Responses

<ResponseField name="400 Bad Request" type="error">
  Invalid Git URL or repository structure
</ResponseField>

<ResponseField name="409 Conflict" type="error">
  Function name already exists for this user
</ResponseField>

<ResponseField name="422 Unprocessable Entity" type="error">
  Code validation failed (dangerous patterns detected)
</ResponseField>

<ResponseField name="500 Internal Server Error" type="error">
  Deployment or Git cloning failed
</ResponseField>

## Private Repository Example

<CodeGroup>

```bash GitHub Token
curl -X POST https://api.mecapy.com/functions/from-git \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "proprietary-calc",
    "git_url": "https://github.com/company/private-repo.git",
    "git_token": "ghp_xxxxxxxxxxxx",
    "git_ref": "v1.0.0",
    "handler": "main.calculate"
  }'
```

```python GitLab Token
import requests

response = requests.post(
    "https://api.mecapy.com/functions/from-git",
    headers={
        "Authorization": f"Bearer {token}",
    },
    json={
        "name": "gitlab-function",
        "git_url": "https://gitlab.com/company/private-repo.git",
        "git_token": "glpat-xxxxxxxxxxxx",
        "handler": "src.main.process"
    }
)
```

</CodeGroup>

## Best Practices

<Steps>
  <Step title="Use Specific Git References">
    Use tags or commit SHAs for production deployments instead of branches
  </Step>
  <Step title="Minimize Repository Size">
    Keep repositories under 100MB by excluding unnecessary files
  </Step>
  <Step title="Secure Tokens">
    Store Git tokens securely and never commit them to version control
  </Step>
  <Step title="Test Locally First">
    Test your function code locally before deploying from Git
  </Step>
</Steps>
